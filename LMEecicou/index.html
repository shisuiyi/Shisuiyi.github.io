<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>师不予测试笔记</title>
<meta name="description" content="<font color=#6495ED size=2 >小小Tester的学习历程</font>" />
<link rel="shortcut icon" href="https://Shisuiyi.github.io/favicon.ico?v=1637391642379">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://Shisuiyi.github.io/styles/main.css">



  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="ri-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://Shisuiyi.github.io">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://Shisuiyi.github.io/images/avatar.png?v=1637391642379" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">师不予测试笔记</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            文章目录
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-json-%E6%95%B0%E6%8D%AE">1. <code>json</code> 数据</a></li>
<li><a href="#2-python-%E6%93%8D%E4%BD%9C-json-%E6%96%87%E4%BB%B6">2. python 操作 <code>json</code> 文件</a>
<ul>
<li><a href="#21-json-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%BA-python">2.1 <code>json</code> 反序列化为 <code>python</code></a></li>
<li><a href="#22-python-%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%BA-json">2.2 <code>python</code> 序列化为 <code>json</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="ri-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          标签
        </a>
      
    
      
        <a href="https://Shisuiyi.github.io/about" class="menu" style="animation-delay: 0.6000000000000001s" target="_blank">
          关于
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">Powered by <a href="https://github.com/shisuiyi" target="_blank">shisuiyi</a></div>
    <a class="rss" href="https://Shisuiyi.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">Python 操作 json 数据</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2021-11-12 / 6 min read
        </div>
        
          <img class="post-feature-image rounded-lg mx-auto my-4" src="https://Shisuiyi.github.io/post-images/LMEecicou.webp" alt="">
        
        <div class="post-content yue">
          <h2 id="1-json-数据">1. <code>json</code> 数据</h2>
<p>JSON(JavaScript Object Notation)<code>是一种轻量级的数据交换格式，易于阅读和理解。</code>JSON` 格式可以对高纬数据进行表达和存储。</p>
<p><code>JSON</code> 格式通过键值对来表达信息，键是字符串，值可以是：</p>
<table>
<thead>
<tr>
<th>值</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>对象</td>
<td>一对大括号包裹，元素是键值对，键值对用逗号分隔 <code>{key:value}</code></td>
</tr>
<tr>
<td>数组</td>
<td>一对中括号包裹，元素是 JSON 可以表达的所有数据类型，元素之间使用逗号分隔 <code>[value1,value2,value3]</code></td>
</tr>
<tr>
<td>字符串</td>
<td>双引号包裹 <code>&quot;师不予&quot;</code></td>
</tr>
<tr>
<td>整数</td>
<td><code>12</code></td>
</tr>
<tr>
<td>浮点数</td>
<td><code>1.2</code></td>
</tr>
<tr>
<td>布尔型</td>
<td><code>true</code>,<code>false</code></td>
</tr>
<tr>
<td>空</td>
<td><code>null</code></td>
</tr>
</tbody>
</table>
<p>例如：</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;Felix&quot;,
    &quot;age&quot;: 18,
    &quot;hobby&quot;: [&quot;运动&quot;,&quot;妹子&quot;],
    &quot;friends&quot;: [
        {
            &quot;name&quot;: &quot;刘德华&quot;
        },
        {
            &quot;name&quot;: &quot;梁朝伟&quot;
        }
    ]
}
</code></pre>
<p>创建一个名为 <code>xinlan.json</code> 的文本文件，将上面的 <code>json</code> 数据写入文件中。</p>
<h2 id="2-python-操作-json-文件">2. python 操作 <code>json</code> 文件</h2>
<p>直观上，JSON 格式和 python 中的对象类似，对应表示关系如下：</p>
<table>
<thead>
<tr>
<th>JSON</th>
<th>PYTHON</th>
</tr>
</thead>
<tbody>
<tr>
<td>对象(object)</td>
<td>字典(dict)</td>
</tr>
<tr>
<td>数组（array)</td>
<td>列表(list)</td>
</tr>
<tr>
<td>字符串(string)</td>
<td>字符串(str)</td>
</tr>
<tr>
<td>整数(int)</td>
<td>整数(int)</td>
</tr>
<tr>
<td>实数(float)</td>
<td>实数(float)</td>
</tr>
<tr>
<td>true</td>
<td>True</td>
</tr>
<tr>
<td>false</td>
<td>False</td>
</tr>
<tr>
<td>null</td>
<td>None</td>
</tr>
</tbody>
</table>
<p>直接通过字符串解析 <code>json</code> 文件不是太简单，python 提供了内置 <code>json</code> 模块用来解析 <code>json</code> 文件。</p>
<h3 id="21-json-反序列化为-python">2.1 <code>json</code> 反序列化为 <code>python</code></h3>
<p><code>python</code> 对象转 <code>json</code> 字符串称为序列化，反之为反序列化。</p>
<p><code>json</code> 模块提供了两个函数来支持 <code>json</code> 字符串反序列化为一个 <code>python</code> 对象。</p>
<ul>
<li><strong><code>json.loads(s)</code></strong></li>
</ul>
<p>接收一个 <code>json</code> 格式的字符串，反序列化一个 python 对象。如果参数 <code>s</code> 的格式不满足 <code>json</code> 格式，抛出 <code>JSONDecodeError</code> 异常。</p>
<pre><code class="language-python">import json
json_str = '{&quot;name&quot;:&quot;Felix&quot;,&quot;age&quot;:18}'
print(json_str, type(json_str))
load_data = json.loads(json_str)
print(load_data, type(load_data))
</code></pre>
<p>运行结果：</p>
<pre><code class="language-python">{&quot;name&quot;:&quot;Felix&quot;,&quot;age&quot;:18} &lt;class 'str'&gt;
{'name': 'Felix', 'age': 18} &lt;class 'dict'&gt;
</code></pre>
<ul>
<li><strong><code>json.load(fb)</code></strong></li>
</ul>
<p>有时候需要从 <code>json</code> 文件中加载数据，这是一个快捷方法。接收一个以读方式打开的 <code>json</code> 文件对象，将文件中的 <code>json</code> 数据反序列化为一个 python 对象。</p>
<pre><code class="language-python">import json
with open('felix.json','r',encoding='utf-8') as f:
    load_data = json.load(f)
    print(load_data, type(load_data))
</code></pre>
<p>运行结果：</p>
<pre><code class="language-python">{'name': 'Felix', 'age': 18, 'hobby': ['运动', '妹子'], 'friends': [{'name': '刘德华'}, {'name': '梁朝伟'}]} &lt;class 'dict'&gt;
</code></pre>
<h3 id="22-python-序列化为-json">2.2 <code>python</code> 序列化为 <code>json</code></h3>
<p>与反序列化类似，序列化 <code>json</code> 模块也提供了两个对应的函数</p>
<ul>
<li>
<p><strong><code>json.dumps(obj,ensure_ascii=True,indent=None,sort_keys=False)</code></strong></p>
<p>将一个 <code>python</code> 对象序列化为一个 <code>json</code> 格式的字符串。</p>
<ul>
<li>obj：<code>python</code> 对象</li>
<li>ensure_ascii: 默认为 True，输出保证将所有输入的非 ASCII 字符转义。如果 <em>ensure_ascii</em> 是 false，这些字符会原样输出。</li>
<li>indent：一个非负整数或者字符串，JSON 数组元素和对象成员会被美化输出为该值指定的缩进等级。如果缩进等级为零、负数或者 <code>&quot;&quot;</code>，则只会添加换行符。<code>None``（默认值）选择最紧凑的表达。使用一个正整数会让每一层缩进同样数量的空格。如果 *indent* 是一个字符串（比如 ``&quot;\t&quot;</code>），那个字符串会被用于缩进每一层。</li>
<li>sort_keys:为 True（more 为 False)，表示字典的输出会以键的顺序排序。</li>
</ul>
</li>
</ul>
<pre><code class="language-python">import json
data = {
&quot;name&quot;: &quot;Felix&quot;,
    &quot;age&quot;: 18,
    &quot;hobby&quot;: ['运动','妹子'],
    &quot;friends&quot;: [
        {
            &quot;name&quot;: &quot;刘德华&quot;
        },
        {
            &quot;name&quot;: &quot;梁朝伟&quot;
        }
    ]
}
json_str = json.dumps(data)
print(json_str)
print(json.dumps(data,ensure_ascii=False))
print(json.dumps(data,ensure_ascii=False,indent=4))
print(json.dumps(data,ensure_ascii=False,indent=4, sort_keys=True))
</code></pre>
<p>运行结果：</p>
<pre><code class="language-python">{&quot;name&quot;: &quot;Felix&quot;, &quot;age&quot;: 18, &quot;hobby&quot;: [&quot;\u8fd0\u52a8&quot;, &quot;\u59b9\u5b50&quot;], &quot;friends&quot;: [{&quot;name&quot;: &quot;\u5218\u5fb7\u534e&quot;}, {&quot;name&quot;: &quot;\u6881\u671d\u4f1f&quot;}]}
{&quot;name&quot;: &quot;Felix&quot;, &quot;age&quot;: 18, &quot;hobby&quot;: [&quot;运动&quot;, &quot;妹子&quot;], &quot;friends&quot;: [{&quot;name&quot;: &quot;刘德华&quot;}, {&quot;name&quot;: &quot;梁朝伟&quot;}]}
{
    &quot;name&quot;: &quot;Felix&quot;,
    &quot;age&quot;: 18,
    &quot;hobby&quot;: [
        &quot;运动&quot;,
        &quot;妹子&quot;
    ],
    &quot;friends&quot;: [
        {
            &quot;name&quot;: &quot;刘德华&quot;
        },
        {
            &quot;name&quot;: &quot;梁朝伟&quot;
        }
    ]
}
{
    &quot;age&quot;: 18,
    &quot;friends&quot;: [
        {
            &quot;name&quot;: &quot;刘德华&quot;
        },
        {
            &quot;name&quot;: &quot;梁朝伟&quot;
        }
    ],
    &quot;hobby&quot;: [
        &quot;运动&quot;,
        &quot;妹子&quot;
    ],
    &quot;name&quot;: &quot;Felix&quot;
}
</code></pre>
<ul>
<li><strong><code>json.dump(obj,fb,ensure_ascii=True,indent=None,sort_keys=False)</code></strong></li>
</ul>
<p>将一个 <code>python</code> 对象序列化为 <code>json</code> 数据后写入一个以 <code>w</code> 模式打开的文件。</p>
<ul>
<li>fb: 一个以文本写打开的文件句柄</li>
</ul>
<p>其他参数同 <code>json.dumps()</code></p>
<pre><code class="language-python">import json
data = {
	&quot;name&quot;: &quot;Felix&quot;,
    &quot;age&quot;: 18,
    &quot;hobby&quot;: ['运动','妹子'],
    &quot;friends&quot;: [
        {
            &quot;name&quot;: &quot;刘德华&quot;
        },
        {
            &quot;name&quot;: &quot;梁朝伟&quot;
        }
    ]
}
with open('first.json', 'w', encoding='utf-8') as f:
    json.dump(data,f,ensure_ascii=False,indent=4)
</code></pre>

        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://Shisuiyi.github.io/BwvFnJ7qZ/">
            <span class="flex-auto">JSON</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://Shisuiyi.github.io/o5ETtCpkfo/">
            <span class="flex-auto">接口测试</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://Shisuiyi.github.io/VInD-wOSR/">
                <h3 class="post-title">
                  <i class="ri-arrow-left-line"></i>
                  分层设计结构
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://Shisuiyi.github.io/On80jWjLX/">
                <h3 class="post-title">
                  ddt 数据驱动/参数化
                  <i class="ri-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '978584b9702b5d850dd5',
    clientSecret: 'b6647706cb7b990e2cd5ca77eccf73943df73a6c',
    repo: 'Shisuiyi.github.io',
    owner: 'shisuiyi',
    admin: ['shisuiyi'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

      </div>
    </div>

    <script src="https://Shisuiyi.github.io/media/prism.js"></script>  
<script>

Prism.highlightAll()
let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
